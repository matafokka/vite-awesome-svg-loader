<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="./typescript.svg"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1"
    />
    <title>Vanilla JS Demo</title>
    <script type="module" crossorigin src="./assets/index-B5tB5guy.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-Zj6e_rwJ.css">
    <script type="module">import.meta.url;import("_").catch(()=>1);(async function*(){})().next();if(location.protocol!="file:"){window.__vite_is_modern_browser=true}</script>
    <script type="module">!function(){if(window.__vite_is_modern_browser)return;console.warn("vite: loading legacy chunks, syntax error above and the same error below should be ignored");var e=document.getElementById("vite-legacy-polyfill"),n=document.createElement("script");n.src=e.src,n.onload=function(){System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))},document.body.appendChild(n)}();</script>
  </head>
  <body>
    <div id="content-wrapper">
      <div id="app">
        <article class="main">
          <h1>Vanilla JS awesome SVG loader demo</h1>

          <p>
            This project demonstrates

            <a
              href="https://github.com/matafokka/vite-awesome-svg-loader"
              class="mono"
              >vite-awesome-svg-loader</a
            >

            capabilities, and how it works with different SVG images.
          </p>

          <p>As an example, actual icons and line art images are present.</p>

          <h2>Import images via URL and render with regular <span class="mono">&lt;img&gt;</span> tag</h2>

          <p>
            Imports used in this section can be configured using regexes in plugin config (see
            <span class="mono">vite.config.ts</span> file).
          </p>

          <h3>Original files</h3>

          <!-- There will be images imported in script -->
          <div
            id="url-original"
            class="images"
          ></div>

          <h3>Preserve line width</h3>

          <p>
            Try scaling images using slider at the bottom of the screen. Line width will stay the same despite image
            size.
          </p>

          <div
            id="url-pre-width"
            class="images"
          ></div>

          <h2>Render images with <span class="mono">SvgImage</span> component</h2>

          <p>
            This component will render SVG source code into a SVG symbol, so you'll have more freedom to manipulate it.
            Most importantly, it allows you to set custom colors.
          </p>

          <h3>Original files</h3>

          <div
            id="svg-image-original"
            class="images"
          ></div>

          <h3>Preserve line width</h3>

          <div
            id="pre-width-svg-image"
            class="images"
          ></div>

          <h3>Preserve line width and replace colors</h3>

          <div
            id="pre-width-replace-color-svg-image"
            class="images"
          ></div>

          <h2>Render icons with <span class="mono">SvgIcon</span> component</h2>

          <p>This component simplifies icons colorization and sizing.</p>

          <p>
            It makes sense to always preserve icon's line width. In real project this should be done via config (see
            <span class="mono">vite.config.ts</span> file).
          </p>

          <h3>Original files</h3>

          <div
            id="svg-icons-orig"
            class="images"
          ></div>

          <h3>Preserve line width and replace colors</h3>

          <div
            id="svg-icons-pre-width-replace-color"
            class="images"
          ></div>

          <h3>Animate color</h3>

          <p>The example above but we'll animate colors using CSS.</p>

          <div
            id="svg-icons-animated-color"
            class="images color-animation"
          ></div>

          <h2>Automatically reuse same SVG in multiple symbols</h2>

          <p>
            This example demonstrates that one SVG is being reused in multiple
            <span class="mono">SvgImage</span>
            and
            <span class="mono">SvgIcon</span>
            components.
          </p>

          <p>
            You can verify that images are reused by finding
            <span class="mono">&lt;symbol&gt;</span>
            element with the same ID as
            <span class="mono">href</span> attribute of the
            <span class="mono">&lt;use&gt;</span>
            elements. There should be only one
            <span class="mono">&lt;symbol&gt;</span>
            element with that ID.
          </p>

          <div class="buttons-container">
            <button id="add-button">Add image</button>
            <button id="remove-button">Remove image</button>
          </div>

          <h3><span class="mono">SvgImage</span></h3>

          <div
            id="dynamic-images"
            class="images"
          ></div>

          <h3><span class="mono">SvgIcon</span></h3>

          <div
            id="dynamic-icons"
            class="images"
          ></div>

          <h2>Plugin config demo</h2>

          <p>
            All images transformations are configured at <span class="mono">vite.config.ts</span> file. All files in
            each entry are actually different files in different directories: one directory for each section.
          </p>

          <p>Each directory contains following files:</p>

          <ol>
            <li>
              <span class="mono">skip-transforms.svg</span> - configured to be skipped while transforming. This is the
              last file in each entry.
            </li>

            <li>
              <span class="mono">skip-loading.svg</span> - configured to not be loaded by
              <span class="mono">vite-awesome-svg-loader</span>. We'll show how it works in the last section.
            </li>
          </ol>

          <p>Directory <span class="mono">config-demo/all</span> additionally contains following files:</p>

          <ol>
            <li>
              <span class="mono">colors-not-preserved.svg</span> - configured to be skipped while replacing colors.
            </li>

            <li>
              <span class="mono">line-width-not-preserved.svg</span> - configured to be skipped while preserving line
              width.
            </li>

            <li>
              <span class="mono">ignore-elements.svg</span> - file is transformed, but certain elements are ignored.
            </li>
          </ol>

          <h3>Preserve line width</h3>

          <div
            id="cfg-pre-width"
            class="images"
          ></div>

          <h3>Replace color</h3>

          <div
            id="cfg-replace-color"
            class="images cfg-replace-color"
          ></div>

          <h3>Every transform: preserve line width and replace color</h3>

          <div
            id="cfg-all"
            class="images cfg-replace-color"
          ></div>

          <h3>All transforms except certain SVG elements</h3>

          <p>
            It's possible to skip transforms per-element and per-element-per-file. See
            <span class="mono">vite.config.ts</span> file for examples.
          </p>

          <div id="per-element-transforms-checkbox"></div>

          <div
            id="skip-elements-image"
            class="images"
          ></div>

          <h3>Skip loading entirely</h3>

          <p>
            These files are configured to be skipped by <span class="mono">vite-awesome-svg-loader</span> entirely. This
            is useful, for example, when you want to use other loader.
          </p>

          <p>Since we're not using any other loader, we'll just get file path.</p>

          <p>Here's the list of these files:</p>

          <ol id="skip-loading"></ol>

          <h2>Named icons with dynamic imports inside icon component</h2>

          <p>
            This is just an example, you should implement your own component that handles loading state, errors, etc.
          </p>

          <div
            id="named-icons"
            class="images"
          ></div>

          <h2>Other rendering methods</h2>

          <p>
            So far we've demonstrated two rendering methods: URL and source code that's being reused as a symbol. Let's
            see how else we can render images.
          </p>

          <p>
            These methods are less performant than what we've already discussed. However, they may have their use-cases.
          </p>

          <h3>Put SVG directly into the DOM</h3>

          <p>
            This is what all UI frameworks do. However, this approach is recommended only when you need full control
            over SVGs. For other purposes, use other rendering methods such as URL or symbols.
          </p>

          <div
            id="svg-in-dom"
            class="images svg-in-dom"
          ></div>

          <h3>Data URI</h3>

          <p>
            SVGs can be loaded as a
            <a
              href="https://en.wikipedia.org/wiki/Data_URI_scheme"
              target="_blank"
            >
              Data URI
            </a>

            and displayed by setting
            <span class="mono">&lt;img src="data:image/svg+xml;..."&gt;</span>
            or
            <span class="mono">background-image: url("data:image/svg+xml;...")</span>
            <span>.</span>
          </p>

          <p>
            <span class="mono">vite-awesome-svg-loader</span> supports source code and base64 Data URIs. It also can
            load raw base64.
          </p>

          <h4>Source code data URI, original files</h4>

          <div
            id="source-data-uri"
            class="images"
          ></div>

          <h4>Base64 data URI, original files</h4>

          <div
            id="base64-data-uri"
            class="images"
          ></div>

          <h4>Base64, original file</h4>

          <p class="mono">
            <span class="hidden"> There's base64 data that's replaced with this text for assistive technologies. </span>

            <span
              id="base-64"
              aria-hidden="true"
            ></span>
          </p>

          <h2>Caveats</h2>

          <h3>Stroke width should be in CSS pixels</h3>

          <p>
            When preserving line width, stroke width should be in CSS pixels. Image size doesn't matter. This is how it
            looks like:
          </p>

          <div id="caveats-line-width-show-original-checkbox"></div>

          <div
            id="caveats-line-width"
            class="images"
            style="color: var(--text-color)"
          ></div>

          <p>Incorrect stroke width will result in something like this:</p>

          <div
            id="caveats-broken-line-width"
            class="images"
            style="color: var(--text-color)"
          ></div>

          <h3>Preserving line width works only on strokes</h3>

          <p>Create your images with strokes instead of filled path to preserve line width.</p>

          <p>Toggle original image to see that there's no difference when stroke is not preserved.</p>

          <div id="caveats-only-strokes-supported-checkbox"></div>

          <div
            id="caveats-only-strokes-supported"
            class="images"
          ></div>

          <h3>
            Transparent colors should be omitted or set as <span class="mono">none</span> or
            <span class="mono">transparent</span>
          </h3>

          <p>
            Quite common catch is to set white color and then wonder why image is messed up. If you don't want fill,
            omit it or set to <span class="mono">none</span> or <span class="mono">transparent</span>.
          </p>

          <div id="caveats-white-fill-checkbox"></div>

          <div
            id="caveats-white-fill"
            class="images"
          ></div>

          <h2>Recipes</h2>

          <h3>Multicolored icons</h3>

          <p>Here we'll see how we can implement icons that have multiple colors, for example:</p>

          <div
            id="multicolor-original"
            class="images"
          ></div>

          <p>
            Our solution should be extensible, i.e. if accent color changes, we as developers should change only one
            line of code.
          </p>

          <h4>CSS variables</h4>

          <p>Classic solution is to use variables in SVG files and render then directly.</p>

          <p>With this loader, we can improve classic approach by:</p>

          <ol>
            <li>
              Leveraging SVG symbols to improve rendering performance. We've already done this by using
              <span class="mono">SvgImage</span> and <span class="mono">SvgIcon</span> components.
            </li>

            <li>
              <p>
                Using a color map instead of hard-coding variables. For example, we can map
                <span class="mono">red</span> to <span class="mono">var(--primary-color)</span>,
                <span class="mono">green</span> - to <span class="mono">var(--secondary-color)</span>,
                <span class="mono">blue</span> - to <span class="mono">var(--tertiary-color)</span> and so on. This
                allows designers and developers to work seamlessly and share same icon sets without any additional
                manual modifications.
              </p>

              <p>
                This is done via <span class="mono">replaceColorsList</span> option, see
                <span class="mono">vite.config.ts</span>
              </p>

              <p>
                If your design system supports variables and exports icons with variables, it's better to use these
                variables as-is.
              </p>
            </li>
          </ol>

          <div
            id="multicolor-vars"
            class="images"
          ></div>

          <p>
            Since we're using variables instead of single color, for icons it's recommended to create a wrapper around
            <span class="mono">SvgIcon</span> and omit <span class="mono">color</span> prop.
          </p>

          <h4>Composite images</h4>

          <p>We can create separate SVG files and overlay them on top of each other.</p>

          <p>
            This allows us not to modify SVG files which is good for complex images. However, creating a good
            abstraction over layers can be quite challenging.
          </p>

          <p>Here's how composite image may look like:</p>

          <div
            id="composite"
            class="images"
          ></div>

          <h4>Antipatterns</h4>

          <p>
            Colorize some elements and ignore others with <span class="mono">skipSetCurrentColorSelectors</span> or
            <span class="mono">skipTransformsSelectors</span> options. This will not be extensible, and it'll hurt build
            performance. Don't use these options to achieve any such functionality.
          </p>

          <div
            id="dev-tests"
            style="display: none"
          >
            <h2>Development tests</h2>

            <p>These tests are for development purposes but may provide additional information to the user</p>

            <h3><span class="mono">SvgImage</span></h3>

            <h4><span class="mono">SvgImage.setSrc()</span> works. Should display star icon.</h4>

            <div
              id="replace-src"
              class="images"
            ></div>

            <h4>Attributes work</h4>

            <div
              id="attrs-work"
              class="images"
            ></div>

            <h4>Attributes resetting work</h4>

            <div
              id="attrs-resetting-work"
              class="images"
            ></div>

            <h4>Unmounting works</h4>

            <p>There should be no images</p>

            <div id="unmounting-works"></div>

            <h4>Remounting works</h4>

            <div id="remounting-works"></div>

            <h4>Remounting works without prior unmounting</h4>

            <div
              id="remounting-works-2"
              class="images"
            ></div>

            <h3><span class="mono">SvgIcon</span></h3>

            <h4>Unmounting works</h4>

            <p>There should be no images</p>

            <div id="icon-unmounting-works"></div>

            <h4>Remounting works</h4>

            <div
              id="icon-remounting-works"
              class="images"
            ></div>

            <h4>Remounting works without prior unmounting</h4>

            <div
              id="icon-remounting-works-2"
              class="images"
            ></div>

            <h4><span class="mono">SvgIcon.setWrapperAttrs()</span> works</h4>

            <div
              id="set-wrapper-attrs-works"
              class="images"
            ></div>

            <h4><span class="mono">SvgIcon.setWrapperAttrs()</span> clears previous attributes</h4>

            <div
              id="reset-wrapper-attrs-works"
              class="images"
            ></div>
          </div>
        </article>
      </div>

      <div id="adjustment-container"></div>
    </div>

    <script nomodule>!function(){var e=document,t=e.createElement("script");if(!("noModule"in t)&&"onbeforeload"in t){var n=!1;e.addEventListener("beforeload",(function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute("nomodule")||!n)return;e.preventDefault()}),!0),t.type="module",t.src=".",e.head.appendChild(t),t.remove()}}();</script>
    <script nomodule crossorigin id="vite-legacy-polyfill" src="./assets/polyfills-legacy-Cnz0XH9z.js"></script>
    <script nomodule crossorigin id="vite-legacy-entry" data-src="./assets/index-legacy-CmECBygY.js">System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))</script>
  </body>
</html>
